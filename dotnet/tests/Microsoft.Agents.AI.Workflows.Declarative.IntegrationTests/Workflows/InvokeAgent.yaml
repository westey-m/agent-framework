kind: Workflow
trigger:

  kind: OnConversationStart
  id: workflow_test
  actions:

    - kind: InvokeAzureAgent
      id: invoke_inner1
      agent:
        name: TestAgent
      input:
        messages: =UserMessage("Can an LLM think of funny jokes?")

    - kind: InvokeAzureAgent
      id: invoke_inner2
      agent:
        name: TestAgent
      input:
        messages: =UserMessage("Do you know the joke about the chicken crossing the road? Tell me an improved version of that joke.")
      output:
        autoSend: true

    - kind: InvokeAzureAgent
      id: invoke_external
      conversationId: =System.ConversationId
      agent:
        name: TestAgent
      input:
        messages: =UserMessage("Rate the originality of this well known joke that is being re-told on a scale of 1 to 10. Take note on where improvements or changes were made.")
      output:
        messages: Local.RatingResponse
