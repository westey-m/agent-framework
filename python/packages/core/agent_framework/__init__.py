# Copyright (c) Microsoft. All rights reserved.

import importlib.metadata
from typing import Final

try:
    _version = importlib.metadata.version(__name__)
except importlib.metadata.PackageNotFoundError:
    _version = "0.0.0"  # Fallback for development mode
__version__: Final[str] = _version

from ._agents import Agent, BaseAgent, RawAgent, SupportsAgentRun
from ._clients import (
    BaseChatClient,
    SupportsChatGetResponse,
    SupportsCodeInterpreterTool,
    SupportsFileSearchTool,
    SupportsImageGenerationTool,
    SupportsMCPTool,
    SupportsWebSearchTool,
)
from ._logging import get_logger, setup_logging
from ._mcp import MCPStdioTool, MCPStreamableHTTPTool, MCPWebsocketTool
from ._middleware import (
    AgentContext,
    AgentMiddleware,
    AgentMiddlewareLayer,
    AgentMiddlewareTypes,
    ChatAndFunctionMiddlewareTypes,
    ChatContext,
    ChatMiddleware,
    ChatMiddlewareLayer,
    ChatMiddlewareTypes,
    FunctionInvocationContext,
    FunctionMiddleware,
    FunctionMiddlewareTypes,
    MiddlewareException,
    MiddlewareTermination,
    MiddlewareType,
    MiddlewareTypes,
    agent_middleware,
    chat_middleware,
    function_middleware,
)
from ._sessions import (
    AgentSession,
    BaseContextProvider,
    BaseHistoryProvider,
    InMemoryHistoryProvider,
    SessionContext,
    register_state_type,
)
from ._telemetry import (
    AGENT_FRAMEWORK_USER_AGENT,
    APP_INFO,
    USER_AGENT_KEY,
    USER_AGENT_TELEMETRY_DISABLED_ENV_VAR,
    prepend_agent_framework_to_user_agent,
)
from ._tools import (
    FunctionInvocationConfiguration,
    FunctionInvocationLayer,
    FunctionTool,
    normalize_function_invocation_configuration,
    tool,
)
from ._types import (
    AgentResponse,
    AgentResponseUpdate,
    Annotation,
    ChatOptions,
    ChatResponse,
    ChatResponseUpdate,
    Content,
    ContinuationToken,
    FinalT,
    FinishReason,
    FinishReasonLiteral,
    Message,
    OuterFinalT,
    OuterUpdateT,
    ResponseStream,
    Role,
    RoleLiteral,
    TextSpanRegion,
    ToolMode,
    UpdateT,
    UsageDetails,
    add_usage_details,
    detect_media_type_from_base64,
    map_chat_to_agent_update,
    merge_chat_options,
    normalize_messages,
    normalize_tools,
    prepend_instructions_to_messages,
    validate_chat_options,
    validate_tool_mode,
    validate_tools,
)
from ._workflows import (
    DEFAULT_MAX_ITERATIONS,
    AgentExecutor,
    AgentExecutorRequest,
    AgentExecutorResponse,
    Case,
    CheckpointStorage,
    Default,
    Edge,
    EdgeCondition,
    EdgeDuplicationError,
    Executor,
    FanInEdgeGroup,
    FanOutEdgeGroup,
    FileCheckpointStorage,
    FunctionExecutor,
    GraphConnectivityError,
    InMemoryCheckpointStorage,
    InProcRunnerContext,
    Runner,
    RunnerContext,
    SingleEdgeGroup,
    SubWorkflowRequestMessage,
    SubWorkflowResponseMessage,
    SwitchCaseEdgeGroup,
    SwitchCaseEdgeGroupCase,
    SwitchCaseEdgeGroupDefault,
    TypeCompatibilityError,
    ValidationTypeEnum,
    Workflow,
    WorkflowAgent,
    WorkflowBuilder,
    WorkflowCheckpoint,
    WorkflowCheckpointException,
    WorkflowContext,
    WorkflowConvergenceException,
    WorkflowErrorDetails,
    WorkflowEvent,
    WorkflowEventSource,
    WorkflowEventType,
    WorkflowException,
    WorkflowExecutor,
    WorkflowMessage,
    WorkflowRunnerException,
    WorkflowRunResult,
    WorkflowRunState,
    WorkflowValidationError,
    WorkflowViz,
    create_edge_runner,
    executor,
    handler,
    resolve_agent_id,
    response_handler,
    validate_workflow_graph,
)

__all__ = [
    "AGENT_FRAMEWORK_USER_AGENT",
    "APP_INFO",
    "DEFAULT_MAX_ITERATIONS",
    "USER_AGENT_KEY",
    "USER_AGENT_TELEMETRY_DISABLED_ENV_VAR",
    "Agent",
    "AgentContext",
    "AgentExecutor",
    "AgentExecutorRequest",
    "AgentExecutorResponse",
    "AgentMiddleware",
    "AgentMiddlewareLayer",
    "AgentMiddlewareTypes",
    "AgentResponse",
    "AgentResponseUpdate",
    "AgentSession",
    "Annotation",
    "BaseAgent",
    "BaseChatClient",
    "BaseContextProvider",
    "BaseHistoryProvider",
    "Case",
    "ChatAndFunctionMiddlewareTypes",
    "ChatContext",
    "ChatMiddleware",
    "ChatMiddlewareLayer",
    "ChatMiddlewareTypes",
    "ChatOptions",
    "ChatResponse",
    "ChatResponseUpdate",
    "CheckpointStorage",
    "Content",
    "ContinuationToken",
    "Default",
    "Edge",
    "EdgeCondition",
    "EdgeDuplicationError",
    "Executor",
    "FanInEdgeGroup",
    "FanOutEdgeGroup",
    "FileCheckpointStorage",
    "FinalT",
    "FinishReason",
    "FinishReasonLiteral",
    "FunctionExecutor",
    "FunctionInvocationConfiguration",
    "FunctionInvocationContext",
    "FunctionInvocationLayer",
    "FunctionMiddleware",
    "FunctionMiddlewareTypes",
    "FunctionTool",
    "GraphConnectivityError",
    "InMemoryCheckpointStorage",
    "InMemoryHistoryProvider",
    "InProcRunnerContext",
    "MCPStdioTool",
    "MCPStreamableHTTPTool",
    "MCPWebsocketTool",
    "Message",
    "MiddlewareException",
    "MiddlewareTermination",
    "MiddlewareType",
    "MiddlewareTypes",
    "OuterFinalT",
    "OuterUpdateT",
    "RawAgent",
    "ResponseStream",
    "Role",
    "RoleLiteral",
    "Runner",
    "RunnerContext",
    "SessionContext",
    "SingleEdgeGroup",
    "SubWorkflowRequestMessage",
    "SubWorkflowResponseMessage",
    "SupportsAgentRun",
    "SupportsChatGetResponse",
    "SupportsCodeInterpreterTool",
    "SupportsFileSearchTool",
    "SupportsImageGenerationTool",
    "SupportsMCPTool",
    "SupportsWebSearchTool",
    "SwitchCaseEdgeGroup",
    "SwitchCaseEdgeGroupCase",
    "SwitchCaseEdgeGroupDefault",
    "TextSpanRegion",
    "ToolMode",
    "TypeCompatibilityError",
    "UpdateT",
    "UsageDetails",
    "ValidationTypeEnum",
    "Workflow",
    "WorkflowAgent",
    "WorkflowBuilder",
    "WorkflowCheckpoint",
    "WorkflowCheckpointException",
    "WorkflowContext",
    "WorkflowConvergenceException",
    "WorkflowErrorDetails",
    "WorkflowEvent",
    "WorkflowEventSource",
    "WorkflowEventType",
    "WorkflowException",
    "WorkflowExecutor",
    "WorkflowMessage",
    "WorkflowRunResult",
    "WorkflowRunState",
    "WorkflowRunnerException",
    "WorkflowValidationError",
    "WorkflowViz",
    "add_usage_details",
    "agent_middleware",
    "chat_middleware",
    "create_edge_runner",
    "detect_media_type_from_base64",
    "executor",
    "function_middleware",
    "get_logger",
    "handler",
    "map_chat_to_agent_update",
    "merge_chat_options",
    "normalize_function_invocation_configuration",
    "normalize_messages",
    "normalize_tools",
    "prepend_agent_framework_to_user_agent",
    "prepend_instructions_to_messages",
    "register_state_type",
    "resolve_agent_id",
    "response_handler",
    "setup_logging",
    "tool",
    "validate_chat_options",
    "validate_tool_mode",
    "validate_tools",
    "validate_workflow_graph",
]
